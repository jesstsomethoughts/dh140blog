[
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "This is the first post in a Quarto blog. Welcome!\n\nSince this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "posts/DH140_FinalBlog.html",
    "href": "posts/DH140_FinalBlog.html",
    "title": "DH 140 Final Project Blog Page",
    "section": "",
    "text": "My project aims to analyze how effective the CDC’s Social Vulnerability Index (SVI) is in representing Native Hawaiian or Pacific Islander (NHPI) populations, which have been historically underrepresented in data. Currently, the SVI computes a combination of Census variables into one index that helps inform government officials about communities in need before, during, or after disasters. I will be comparing the SVI values for various geographical areas, specifically California counties and Census tracts, with the relative population of NHPIs in that given area. Although I hope to expand my research to the US as a whole, I decided to zoom in on California for now due to Jupyter memory and time constraints. Outside of Hawaii, California is the state with the highest NHPI population in the US.\nI was motivated to further research this topic from working in the NHPI Data Policy Lab and from community feedback. Ultimately, my goals are to: 1. Research how the SVI is computed (Census variables and how they are calculated into an index score) 2. Assess how accurately the SVI represents NHPIs 3. Disaggregate the data to create a more equitable index specifically for NHPI populations\nSome questions I want to answer are: - How is race/ethnicity, specifically NHPI populations, calculated and factored in the SVI? - Are NHPI populations underrepresented or overrepresented in the SVI, and to what extent? What about other racial/ethnic minorities? - What geographical trends appear with respect to SVI scores and their over or underrepresentation of NHPI populations? - Where do the largest disparities exist? Are there other factors that might cause this?\nAnd ultimately:\nHow can the SVI be improved or complemented in order to most accurately represent the needs of NHPI communities?\nI obtined my data from the CDC SVI website and the Census Reporter, which takes data from the official Census website.\n\n\n\n\n\nSVI data, which can be directly downloaded from the CDC’s website and visualized in a map on the same website, is published every two years. The most recent data is from 2020. The SVI calculates a score for a myriad of indicators in the following categories: socioeconomic status, household characteristics, racial and ethnic minority status, and housing type and transporation. The indicators are primarily computed from data from the American Community Survey (ACS) from the Census Bureau. It then computes the percentile ranking of all indicators combined into an overall index between 0 and 1.\nI first wanted to look at a few variables in the dataset: RPL_THEME1, RPL_THEME2, RPL_THEME3, RPL_THEME4, and RPL_THEMES. The first four represent the individual scores for the indicator categories in respective order, and RPL_THEMES is the percentile ranking of all combined.\n\n\nCode\n# First, import necessary library packages\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport geopandas as gpd\nimport folium\nfrom folium.features import GeoJsonTooltip\n\nplt.style.use('seaborn-v0_8-pastel')\n\n\n\n\nCode\n# Next, import my datasets\nsvi_counties = pd.read_csv('California_COUNTY.csv')  # SVI variables and index scores for all California counties\nsvi_tracts = pd.read_csv('California_census.csv') # SVI variables and index scores for all California Census tracts\n\n\nAccording to the documentation, values with ‘-999.0’ were noted for tracts with a zero population estimate, or if a value for a certain variable was unavailable. In order to ensure that summary statistics are accurate, I will filter out any rows in my dataframe wherein RPL_THEMES (the variable representing the overall SVI score) is equal to -999.\n\n\nCode\n# Filter dataset\nsvi_counties = svi_counties[(svi_counties['RPL_THEMES'] != -999)]\nsvi_tracts = svi_tracts[(svi_tracts['RPL_THEMES'] != -999)]\n\n\nSince the SVI datasets contain several variables, I am going to further filter the dataframes for the variables I want to look at specifically. These are the individual scores for the indicator categories and variables related to racial/ethnic minority values.\n\n\nCode\n# Filter for minority-related variables, SPL_THEMES, and RPL_THEMES (indicator category values and overall index scores)\nsvi_counties = svi_counties[['FIPS', 'COUNTY', 'E_MINRTY', 'M_MINRTY', 'EP_MINRTY', 'EPL_MINRTY', 'F_MINRTY', 'F_THEME3', 'SPL_THEME1', 'RPL_THEME1', 'SPL_THEME2', 'RPL_THEME2', 'SPL_THEME3', 'RPL_THEME3', 'SPL_THEME4', 'RPL_THEME4', 'SPL_THEMES', 'RPL_THEMES']]\nsvi_tracts = svi_tracts[['FIPS', 'COUNTY', 'E_MINRTY', 'M_MINRTY', 'EP_MINRTY', 'EPL_MINRTY', 'F_MINRTY', 'F_THEME3', 'SPL_THEME1', 'RPL_THEME1', 'SPL_THEME2', 'RPL_THEME2', 'SPL_THEME3', 'RPL_THEME3', 'SPL_THEME4', 'RPL_THEME4', 'SPL_THEMES', 'RPL_THEMES']]\n\n\nNow I’ll preview the datasets to get a quick look at what the dataframes look like.\n\n\nCode\nsvi_counties.head()\n\n\n\n\n\n\n  \n    \n      \n      FIPS\n      COUNTY\n      E_MINRTY\n      M_MINRTY\n      EP_MINRTY\n      EPL_MINRTY\n      F_MINRTY\n      F_THEME3\n      SPL_THEME1\n      RPL_THEME1\n      SPL_THEME2\n      RPL_THEME2\n      SPL_THEME3\n      RPL_THEME3\n      SPL_THEME4\n      RPL_THEME4\n      SPL_THEMES\n      RPL_THEMES\n    \n  \n  \n    \n      0\n      6001\n      Alameda\n      1153001\n      6526\n      69.4\n      0.8596\n      0\n      0\n      0.9649\n      0.1053\n      1.6843\n      0.0702\n      0.8596\n      0.8596\n      3.1229\n      0.8772\n      6.6317\n      0.2807\n    \n    \n      1\n      6003\n      Alpine\n      564\n      353\n      48.7\n      0.4912\n      0\n      0\n      2.0352\n      0.3509\n      2.4211\n      0.5263\n      0.4912\n      0.4912\n      2.0351\n      0.1930\n      6.9826\n      0.3509\n    \n    \n      2\n      6005\n      Amador\n      9062\n      436\n      23.2\n      0.1754\n      0\n      0\n      1.2806\n      0.1930\n      1.8946\n      0.1579\n      0.1754\n      0.1754\n      2.8597\n      0.6667\n      6.2103\n      0.2281\n    \n    \n      3\n      6007\n      Butte\n      64420\n      2000\n      28.8\n      0.2456\n      0\n      0\n      3.0176\n      0.5965\n      2.3683\n      0.4386\n      0.2456\n      0.2456\n      3.0876\n      0.8596\n      8.7191\n      0.5965\n    \n    \n      4\n      6009\n      Calaveras\n      9048\n      453\n      19.7\n      0.0526\n      0\n      0\n      2.1929\n      0.4211\n      2.2456\n      0.3509\n      0.0526\n      0.0526\n      0.7894\n      0.0000\n      5.2805\n      0.1053\n    \n  \n\n\n\n\n\n\nCode\nsvi_tracts.head()\n\n\n\n\n\n\n  \n    \n      \n      FIPS\n      COUNTY\n      E_MINRTY\n      M_MINRTY\n      EP_MINRTY\n      EPL_MINRTY\n      F_MINRTY\n      F_THEME3\n      SPL_THEME1\n      RPL_THEME1\n      SPL_THEME2\n      RPL_THEME2\n      SPL_THEME3\n      RPL_THEME3\n      SPL_THEME4\n      RPL_THEME4\n      SPL_THEMES\n      RPL_THEMES\n    \n  \n  \n    \n      0\n      6001400100\n      Alameda\n      830\n      181\n      27.3\n      0.1188\n      0\n      0\n      0.3757\n      0.0112\n      2.4259\n      0.4460\n      0.1188\n      0.1188\n      0.4898\n      0.0301\n      3.4102\n      0.0255\n    \n    \n      1\n      6001400200\n      Alameda\n      650\n      170\n      32.8\n      0.1761\n      0\n      0\n      0.9528\n      0.1017\n      1.8119\n      0.1484\n      0.1761\n      0.1761\n      2.4411\n      0.5737\n      5.3819\n      0.1978\n    \n    \n      2\n      6001400300\n      Alameda\n      1973\n      535\n      39.0\n      0.2412\n      0\n      0\n      1.0476\n      0.1244\n      2.1269\n      0.2867\n      0.2412\n      0.2412\n      3.1689\n      0.8483\n      6.5846\n      0.3560\n    \n    \n      3\n      6001400400\n      Alameda\n      1484\n      328\n      35.5\n      0.2036\n      0\n      0\n      0.9715\n      0.1054\n      1.7610\n      0.1322\n      0.2036\n      0.2036\n      2.1282\n      0.4442\n      5.0643\n      0.1596\n    \n    \n      4\n      6001400500\n      Alameda\n      2224\n      679\n      55.3\n      0.4151\n      0\n      0\n      1.7220\n      0.2959\n      1.1185\n      0.0320\n      0.4151\n      0.4151\n      1.5663\n      0.2284\n      4.8219\n      0.1312\n    \n  \n\n\n\n\nSome preliminary observations: - From the SVI Documentation (https://www.atsdr.cdc.gov/placeandhealth/svi/documentation/SVI_documentation_2020.html), I learned that the E_MINRTY variable represents the sum of select columns in the DP05 Table of the 2020 5-Year American Community Survey. These variables included estimates of the following: - Total Hispanic or Latino (of any race) - Not Hispanic or Latino - Black or African American alone - AIAN alone - Asian alone - NHPI alone - Some other race alone - Two or more races\n\nFrom there, the EP_MINRTY variable was calculated by taking the value of E_MINRTY and dividng it by the total population of the given geographical area, and multiply the result by 100 to obtain the percentage.\nThe EPL_MINRTY value is the percentile ranking of all EP_MINRTY values (calculated via the Excel function) based on their values relative to each other.\nSPL_THEME3, which represents the precursor variable for Racial & Ethnic Minority Status, is only equal to the value of EPL_MINRTY.\nSince RPL_THEME3 is the percentile ranking of SPL_THEME3 values and SPL_THEME3 is already in percents, RPL_THEME3 = SPL_THEME3.\n\n\n\nLinked here is a map of the overall SVI score across California counties and how it compares to the 4 indicators/themes that it is comprised of. For future steps, I hope to create the same map for CA Census Tracts, but unfortunately, I initially ran out of memory in this Jupyter notebook to create this map (hence why I am linking the page in the first place).\n\n\n\nLet’s explore the data more by looking at the distribution of E_MINRTY and related variables.\n\n\nCode\nsvi_counties.describe()\n\n\n\n\n\n\n  \n    \n      \n      FIPS\n      E_MINRTY\n      M_MINRTY\n      EP_MINRTY\n      EPL_MINRTY\n      F_MINRTY\n      F_THEME3\n      SPL_THEME1\n      RPL_THEME1\n      SPL_THEME2\n      RPL_THEME2\n      SPL_THEME3\n      RPL_THEME3\n      SPL_THEME4\n      RPL_THEME4\n      SPL_THEMES\n      RPL_THEMES\n    \n  \n  \n    \n      count\n      58.000000\n      5.800000e+01\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n      58.000000\n    \n    \n      mean\n      6058.000000\n      4.307048e+05\n      2924.913793\n      47.031034\n      0.497879\n      0.103448\n      0.103448\n      2.480641\n      0.498484\n      2.477317\n      0.497881\n      0.497879\n      0.497879\n      2.468529\n      0.498488\n      7.924367\n      0.500000\n    \n    \n      std\n      33.773757\n      1.054210e+06\n      3660.565325\n      19.917974\n      0.296036\n      0.307203\n      0.307203\n      1.160708\n      0.296240\n      0.601482\n      0.295977\n      0.296036\n      0.296036\n      0.685627\n      0.295782\n      2.176108\n      0.296261\n    \n    \n      min\n      6001.000000\n      3.370000e+02\n      116.000000\n      11.600000\n      0.000000\n      0.000000\n      0.000000\n      0.315700\n      0.000000\n      1.175400\n      0.000000\n      0.000000\n      0.000000\n      0.789400\n      0.000000\n      3.456200\n      0.000000\n    \n    \n      25%\n      6029.500000\n      1.382375e+04\n      807.250000\n      28.950000\n      0.250000\n      0.000000\n      0.000000\n      1.407875\n      0.250000\n      1.956125\n      0.250000\n      0.250000\n      0.250000\n      2.140325\n      0.250000\n      6.232500\n      0.250000\n    \n    \n      50%\n      6058.000000\n      8.287000e+04\n      1602.000000\n      48.850000\n      0.500000\n      0.000000\n      0.000000\n      2.535150\n      0.500000\n      2.403500\n      0.491200\n      0.500000\n      0.500000\n      2.482400\n      0.500000\n      7.798200\n      0.500000\n    \n    \n      75%\n      6086.500000\n      4.330220e+05\n      3564.000000\n      65.500000\n      0.750000\n      0.000000\n      0.000000\n      3.333200\n      0.736800\n      2.925450\n      0.750000\n      0.750000\n      0.750000\n      2.982475\n      0.750000\n      9.456050\n      0.750000\n    \n    \n      max\n      6115.000000\n      7.437402e+06\n      21779.000000\n      89.800000\n      1.000000\n      1.000000\n      1.000000\n      4.543800\n      1.000000\n      3.719300\n      1.000000\n      1.000000\n      1.000000\n      3.912300\n      1.000000\n      13.140400\n      1.000000\n    \n  \n\n\n\n\n\n\nCode\nsvi_counties['E_MINRTY'].median()\n\n\n82870.0\n\n\nThe numbers are quite large at the county level, but it is immediately apparent that there is huge variation in the data values. The mean and median are very different values, suggesting that the data is also skewed.\n\n\nCode\nsvi_counties.plot(y='E_MINRTY', kind='hist', edgecolor='gray')\nplt.title(\"Distribution of 'E_MINRTY' Values Across California Counties\")\nplt.xlabel(\"E_MINRTY Total\")\n\n\nText(0.5, 0, 'E_MINRTY Total')\n\n\n\n\n\nA histogram of the distribution E_MINRTY confirms my earlier observations and shows that the values are largely skewed to the right, with one very large outlier value at 7e6.\nNow let’s take a look at how ‘E_MINRTY’ values are spread out on the Census tract level.\n\n\nCode\nsvi_tracts.describe()\n\n\n\n\n\n\n  \n    \n      \n      FIPS\n      E_MINRTY\n      M_MINRTY\n      EP_MINRTY\n      EPL_MINRTY\n      F_MINRTY\n      F_THEME3\n      SPL_THEME1\n      RPL_THEME1\n      SPL_THEME2\n      RPL_THEME2\n      SPL_THEME3\n      RPL_THEME3\n      SPL_THEME4\n      RPL_THEME4\n      SPL_THEMES\n      RPL_THEMES\n    \n  \n  \n    \n      count\n      9.044000e+03\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n      9044.000000\n    \n    \n      mean\n      6.055461e+09\n      2752.964175\n      595.281844\n      61.641165\n      0.498891\n      0.099292\n      0.099292\n      2.491987\n      0.500080\n      2.489504\n      0.500331\n      0.498891\n      0.498891\n      2.227011\n      0.500030\n      7.707393\n      0.499994\n    \n    \n      std\n      2.662431e+07\n      1636.830447\n      304.950810\n      25.788269\n      0.288685\n      0.299071\n      0.299071\n      1.146264\n      0.288749\n      0.677581\n      0.288551\n      0.288685\n      0.288685\n      0.877052\n      0.288738\n      2.409768\n      0.288723\n    \n    \n      min\n      6.001400e+09\n      0.000000\n      26.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      0.000000\n      1.563200\n      0.000000\n    \n    \n      25%\n      6.037241e+09\n      1416.000000\n      373.750000\n      39.900000\n      0.248900\n      0.000000\n      0.000000\n      1.555775\n      0.250175\n      2.053550\n      0.250550\n      0.248900\n      0.248900\n      1.624650\n      0.250075\n      5.773125\n      0.249975\n    \n    \n      50%\n      6.059074e+09\n      2578.000000\n      549.000000\n      63.300000\n      0.498800\n      0.000000\n      0.000000\n      2.471300\n      0.500150\n      2.518250\n      0.500350\n      0.498800\n      0.498800\n      2.266950\n      0.500000\n      7.677950\n      0.500000\n    \n    \n      75%\n      6.073017e+09\n      3836.000000\n      760.000000\n      85.225000\n      0.748575\n      0.000000\n      0.000000\n      3.453600\n      0.750125\n      2.968825\n      0.750150\n      0.748575\n      0.748575\n      2.858150\n      0.750025\n      9.657725\n      0.749950\n    \n    \n      max\n      6.115041e+09\n      17427.000000\n      2664.000000\n      100.000000\n      0.994800\n      1.000000\n      1.000000\n      4.940900\n      1.000000\n      4.443000\n      1.000000\n      0.994800\n      0.994800\n      4.683800\n      1.000000\n      13.950300\n      1.000000\n    \n  \n\n\n\n\n\n\nCode\nsvi_tracts['E_MINRTY'].median()\n\n\n2578.0\n\n\nSame trends as on the county level, just on a smaller scale/numbers of smaller magnitude. Let’s confirm with a histogram.\n\n\nCode\nsvi_tracts.plot(y='E_MINRTY', kind='hist', edgecolor='gray')\nplt.title(\"Distribution of 'E_MINRTY' Values Across California Census Tracts\")\nplt.xlabel(\"E_MINRTY Total\")\n\n\nText(0.5, 0, 'E_MINRTY Total')\n\n\n\n\n\nThe histogram plot also shows a right-skewed distribution.\nNow let’s look at the ‘EP_MINRTY’ variable, which divides the minority population (E_MINRTY) by the total population, and what SPL_THEME3 and RPL_THEMES3 (the Racial & Ethnic Minority Status theme values) are based on. This should be a more accurate indicator of what the overall distribution should look like.\n\n\nCode\nsvi_counties['EP_MINRTY'].median()\n\n\n48.85\n\n\n\n\nCode\nsvi_counties.plot(y='EP_MINRTY', kind='hist', edgecolor='gray')\nplt.title(\"Distribution of 'EP_MINRTY' Values Across California Counties\")\nplt.xlabel(\"EP_MINRTY Total\")\n\n\nText(0.5, 0, 'EP_MINRTY Total')\n\n\n\n\n\nThe summary statistics, mean and median similiarities, and histogram all show a relatively symmetric distribution now. At the very least, it is not heavily skewed to the right. Let’s check this at the Census tract level.\n\n\nCode\nsvi_tracts['EP_MINRTY'].median()\n\n\n63.3\n\n\n\n\nCode\nsvi_tracts.plot(y='EP_MINRTY', kind='hist', edgecolor='gray')\nplt.title(\"Distribution of 'EP_MINRTY' Values Across California Census Tracts\")\nplt.xlabel(\"EP_MINRTY Total\")\n\n\nText(0.5, 0, 'EP_MINRTY Total')\n\n\n\n\n\nInterestingly, when disaggregated, the distribution is much more left-skewed. Additionally, the Census tract with the highest minority percentage is not in the county with the highest minority percentage. However, the median is not entirely dissimilar to the mean. This will be something to keep in mind for future data analysis as to the cause of these differences.\nNow let’s see how this carries over to the ‘EPL_MINRTY’ variable, which is the result of applying the PERCENTRANK.INC function in Excel on the ‘EP_MINRTY’ variable.\n\n\nCode\nsvi_counties.plot(y='EPL_MINRTY', kind='hist', edgecolor='gray')\nplt.title(\"Distribution of 'EPL_MINRTY' Values Across California Counties\")\nplt.xlabel(\"EPL_MINRTY Total\")\n\n\nText(0.5, 0, 'EPL_MINRTY Total')\n\n\n\n\n\n\n\nCode\nsvi_tracts.plot(y='EPL_MINRTY', kind='hist', edgecolor='gray')\nplt.title(\"Distribution of 'EPL_MINRTY' Values Across California Census Tracts\")\nplt.xlabel(\"EPL_MINRTY Total\")\n\n\nText(0.5, 0, 'EPL_MINRTY Total')\n\n\n\n\n\nValues for EPL_MINRTY become more or less standardized and symmetrically spread out, as expected.\nThis process goes to show that: 1. Taking percentages of the total population is a good standardization of numbers 2. Percentile ranking (i.e. using the Excel formula) may hide potential skews in the data, such as of EP_MINRTY at the Census tract level. These are important considerations to keep in mind for the future.\nSince the SVI calculates the E_MINRTY by raw population numbers, it has a large probability of silencing smaller minority populations, such as AIAN and NHPI groups. Refer to the tables below for a hypothetical situation:\n\n\n\n\nCounty 1 Pop.\nTotal Pop. in CA\n% of CA Pop.\n\n\n\n\nHispanic/Latino\n190\n100,000\n0.0019\n\n\nNHPI\n10\n1,000\n0.01\n\n\nTotal (E_MINRTY)\n200\n101,000\n0.0119\n\n\n\n\n\n\n\nCounty 2 Pop.\nTotal Pop. in CA\n% of CA Pop.\n\n\n\n\nHispanic/Latino\n100\n100,000\n0.001\n\n\nNHPI\n100\n1,000\n0.1\n\n\nTotal (E_MINRTY)\n200\n101,000\n0.101\n\n\n\nLet’s say that hypothetically, County 1 and County 2 have the same total population. They also have the same raw number of minority individuals. As a result, their E_MINRTY and EP_MINRTY values will be the same. Consequently, their EPL_MINRTY and RPL_THEME3 values will be the same. However, County 1 has 10 NHPI individuals, and County 2 has 100 NHPI individuals. What totaling the raw numbers misses is that County 2 has a much larger proportion of NHPI individuals in relation to their total population (in CA, for instance). Therefore, NHPI communities, even if by raw numbers, are smaller than other minorities such as Hispanic/Latino populations, can be easily looked over.\nIn the last column, I look at another hypothetical of taking the raw minority population, then taking the percent of that relative to their total population in a given geographical area (i.e. for counties, the total NHPI population in the state; for Census tracts, the total NHPI population in its county). That is what I aim to do moving forward, in order to focus on the need of NHPI populations.\nUltimately, I hope to show that minority groups should not be homogenized as one group, but rather disaggregated in order to accurately identify the needs of specific communities by creating an NHPI-based SVI index to supplement the current SVI index.\n\n\n\n\n\nLet’s read in a map file of CA counties from the Census reporter, which also includes the total NHPI population in a given geographical area, represented by the variable ‘B02012001’.\n\n\nCode\ncounties_map = gpd.read_file('acs2021_5yr_ca_counties.json')\n\n\nI will now add a new column for ‘B02012001’/(Total NHPI Population in CA) * 100%. From dataframe, the total NHPI population is 333,632.\n\n\nCode\ncounties_map['Percent_NHPI'] = counties_map['B02012001']/333632*100\n\n\nGot it! Next step will be to take the percent rank of this column to emulate the EPL_MINRTY and RPL_THEME3 value from the SVI Index Score. I’ll do this by creating a new temporary dataframe and simulating the PERCENTRANK.INC function in Excel here directly.\n\n\nCode\ntemp_df = counties_map['Percent_NHPI'].apply(pd.to_numeric, errors='coerce').dropna().to_frame()\ncounties_map['new_SPL_THEME3'] = temp_df.apply(lambda x: (sum(x['Percent_NHPI'] > temp_df['Percent_NHPI']) / (temp_df.count() - 1)).round(3), axis=1)\n\n\n\n\nCode\ncounties_map.head()\n\n\n\n\n\n\n  \n    \n      \n      geoid\n      name\n      B02012001\n      B02012001, Error\n      geometry\n      Percent_NHPI\n      new_SPL_THEME3\n    \n  \n  \n    \n      0\n      04000US06\n      California\n      333632\n      5681\n      MULTIPOLYGON (((-124.13656 41.46445, -124.1332...\n      100.000000\n      1.000\n    \n    \n      1\n      05000US06001\n      Alameda County, CA\n      25525\n      1312\n      POLYGON ((-122.28178 37.70823, -122.10957 37.4...\n      7.650645\n      0.931\n    \n    \n      2\n      05000US06003\n      Alpine County, CA\n      8\n      16\n      POLYGON ((-120.07239 38.70277, -120.07248 38.5...\n      0.002398\n      0.052\n    \n    \n      3\n      05000US06005\n      Amador County, CA\n      207\n      40\n      POLYGON ((-121.02751 38.50829, -121.02708 38.3...\n      0.062044\n      0.241\n    \n    \n      4\n      05000US06007\n      Butte County, CA\n      1463\n      289\n      POLYGON ((-122.04647 39.79765, -122.04013 39.7...\n      0.438507\n      0.586\n    \n  \n\n\n\n\nI will now merge this dataframe with my SVI dataframe so that I can add my new_RPL_THEME3 to the total RPL_THEMES and create new NHPI-specific index score! However, I’ll need to standardize the ‘geoid’ column so that it matches the ‘FIPS’ column for my svi_counties dataframe first.\nDisclaimer: I will consider the new_SPL_THEME3 as equal to a new RPL_THEME3 value as well, since it is only based on one variable.\n\n\nCode\ncounties_map = counties_map.rename(columns={\"geoid\": \"FIPS\"})\ncounties_map['FIPS'] = counties_map['FIPS'].str[-5:]\ncounties_map.at[0, 'FIPS']  = '06'\ncounties_map['FIPS']=counties_map['FIPS'].astype(int)\n\n\n\n\nCode\nmerged_counties_map = pd.merge(counties_map, svi_counties, on='FIPS')\n\n\nSum up SPL_THEMES with my new SPL_THEME3 values.\n\n\nCode\nmerged_counties_map['new_SPL_THEMES'] = merged_counties_map['SPL_THEME1'] + merged_counties_map['SPL_THEME2'] + merged_counties_map['SPL_THEME4'] + merged_counties_map['new_SPL_THEME3']\n\n\nApply the Python version of the PERCENTRANK.INC function again to get my new RPL_THEMES score overall.\n\n\nCode\ntemp_df = merged_counties_map['new_SPL_THEMES'].apply(pd.to_numeric, errors='coerce').dropna().to_frame()\nmerged_counties_map['new_RPL_THEMES'] = temp_df.apply(lambda x: (sum(x['new_SPL_THEMES'] > temp_df['new_SPL_THEMES']) / (temp_df.count() - 1)).round(3), axis=1)\n\n\n\n\nCode\nmerged_counties_map.head()\n\n\n\n\n\n\n  \n    \n      \n      FIPS\n      name\n      B02012001\n      B02012001, Error\n      geometry\n      Percent_NHPI\n      new_SPL_THEME3\n      COUNTY\n      E_MINRTY\n      M_MINRTY\n      ...\n      SPL_THEME2\n      RPL_THEME2\n      SPL_THEME3\n      RPL_THEME3\n      SPL_THEME4\n      RPL_THEME4\n      SPL_THEMES\n      RPL_THEMES\n      new_SPL_THEMES\n      new_RPL_THEMES\n    \n  \n  \n    \n      0\n      6001\n      Alameda County, CA\n      25525\n      1312\n      POLYGON ((-122.28178 37.70823, -122.10957 37.4...\n      7.650645\n      0.931\n      Alameda\n      1153001\n      6526\n      ...\n      1.6843\n      0.0702\n      0.8596\n      0.8596\n      3.1229\n      0.8772\n      6.6317\n      0.2807\n      6.7031\n      0.333\n    \n    \n      1\n      6003\n      Alpine County, CA\n      8\n      16\n      POLYGON ((-120.07239 38.70277, -120.07248 38.5...\n      0.002398\n      0.052\n      Alpine\n      564\n      353\n      ...\n      2.4211\n      0.5263\n      0.4912\n      0.4912\n      2.0351\n      0.1930\n      6.9826\n      0.3509\n      6.5434\n      0.298\n    \n    \n      2\n      6005\n      Amador County, CA\n      207\n      40\n      POLYGON ((-121.02751 38.50829, -121.02708 38.3...\n      0.062044\n      0.241\n      Amador\n      9062\n      436\n      ...\n      1.8946\n      0.1579\n      0.1754\n      0.1754\n      2.8597\n      0.6667\n      6.2103\n      0.2281\n      6.2759\n      0.228\n    \n    \n      3\n      6007\n      Butte County, CA\n      1463\n      289\n      POLYGON ((-122.04647 39.79765, -122.04013 39.7...\n      0.438507\n      0.586\n      Butte\n      64420\n      2000\n      ...\n      2.3683\n      0.4386\n      0.2456\n      0.2456\n      3.0876\n      0.8596\n      8.7191\n      0.5965\n      9.0595\n      0.649\n    \n    \n      4\n      6009\n      Calaveras County, CA\n      170\n      126\n      POLYGON ((-120.07248 38.50987, -120.10337 38.5...\n      0.050954\n      0.207\n      Calaveras\n      9048\n      453\n      ...\n      2.2456\n      0.3509\n      0.0526\n      0.0526\n      0.7894\n      0.0000\n      5.2805\n      0.1053\n      5.4349\n      0.105\n    \n  \n\n5 rows × 26 columns\n\n\n\nJust from previewing my values, it is apparent that since my new_RPL_THEME3 values are different from my RPL_THEME3 values, my new RPL_THEMES score is also quite different from the CDC’s RPL_THEMES values.\nTo save memory, I’m going to only keep necessary columns.\nI’ll create two more columns in order to get the difference between SPL_THEMES and new_SPL_THEMES and the percent differences between RPL_THEMES and new_RPL_THEMES.\n\n\nCode\nmerged_counties_map = merged_counties_map[['FIPS', 'geometry', 'COUNTY', 'new_SPL_THEME3', 'RPL_THEME3', 'SPL_THEMES', 'RPL_THEMES', 'new_SPL_THEMES', 'new_RPL_THEMES']]\n\nmerged_counties_map['diff_SPL'] = merged_counties_map['SPL_THEMES'] - merged_counties_map['new_SPL_THEMES']\nmerged_counties_map['diff_RPL'] = merged_counties_map['RPL_THEMES'] - merged_counties_map['new_RPL_THEMES']\n\n\nJust out of curiosity, I’d like to see what the difference distribution looks like for both SPL_THEMES and RPL_THEMES.\n\n\nCode\nmerged_counties_map.plot(y='diff_SPL', kind='hist', edgecolor='gray')\nplt.title(\"Differences Between SPL_THEMES Values Across California Counties\")\nplt.xlabel(\"Difference Between SPL_THEMES and new SPL_THEMES\")\n\n\nText(0.5, 0, 'Difference Between SPL_THEMES and new SPL_THEMES')\n\n\n\n\n\nNot entirely symmetrical. There seems to be a slight skew to the right, indicating more negative differences. This is highly telling, as if SPL_THEMES - new_SPL_THEMES is negative, it means that new_SPL_THEMES suggests a higher vulnerability score than officially calculated. Let’s check out the difference between RPL_THEMES and new_RPL_THEMES now!\n\n\nCode\nmerged_counties_map.plot(y='diff_RPL', kind='hist', edgecolor='gray')\nplt.title(\"Differences Between RPL_THEMES Values Across California Counties\")\nplt.xlabel(\"Difference Between RPL_THEMES and new RPL_THEMES\")\n\n\nText(0.5, 0, 'Difference Between RPL_THEMES and new RPL_THEMES')\n\n\n\n\n\nUnsuprisingly, a lot less skewed than our previous distribution, as PERCENTRANK does tend to standardize values around mean. Nevertheless, there are several counties wherein meaningful differences do exist. This is worth noting!\nI’ll now create a few maps to identify where these differences exist the most.\n\n\nCode\n# Create folium map centered in California comparing the CDC's SVI score and my new NHPI-specific SVI score\nnew_counties_map = folium.Map(location=[37.5, -118], zoom_start=6,tiles=None, overlay=False)\n\n\n\n\nCode\nfg1 = folium.FeatureGroup(name='CDC SVI Score', overlay=False).add_to(new_counties_map)\nfg2 = folium.FeatureGroup(name='NHPI-Specific SVI Score',overlay=False).add_to(new_counties_map)\n\n\n\n\nCode\n# set color scale\ncustom_scale = (merged_counties_map['RPL_THEMES'].quantile((0,0.2,0.4,0.6,0.8,1))).tolist()\n\n# add to first layer overall SVI score\nsvi_score = folium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'RPL_THEMES'],  # Get the county FIPS and plot the SVI index score (RPL_THEMES) for each county\n            key_on='feature.properties.FIPS', # Get geo boundaries from FIPS column index\n            threshold_scale=custom_scale, # Custom scale for legend\n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", # Use white if there is no data available for the county\n            fill_opacity=0.7,\n            line_opacity=0.2,\n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg1) \n\n# add tooltip\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'RPL_THEMES',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"Overall SVI Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(svi_score)  \n\n\n<folium.features.GeoJson at 0x7febdf359660>\n\n\n\n\nCode\n# add new NHPI SVI score layer on\nnew_svi = folium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'new_RPL_THEMES'],  \n            key_on='feature.properties.FIPS', \n            threshold_scale=custom_scale, \n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", \n            fill_opacity=0.7,\n            line_opacity=0.2,\n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg2) \n\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'new_RPL_THEMES',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"NHPI-Specific SVI Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(new_svi)  \n\n\n<folium.features.GeoJson at 0x7febdf35a500>\n\n\n\n\nCode\n# Add legend to map\nfolium.Choropleth(\n    geo_data=merged_counties_map,\n    data=merged_counties_map,\n    columns=['FIPS', 'RPL_THEMES'],  \n    key_on='feature.properties.FIPS', \n    threshold_scale=custom_scale,\n    fill_color='YlOrRd',\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    legend_name='SVI Index Score', \n    overlay=False,\n    control=False,\n    line_color='black').add_to(new_counties_map)\n\n\n<folium.features.Choropleth at 0x7febdf4731f0>\n\n\n\n\nCode\n# Toggle for aesthetic purposes\nfolium.TileLayer('cartodbpositron',overlay=True,name=\"View in Light Mode\").add_to(new_counties_map)\n\n\n<folium.raster_layers.TileLayer at 0x7febe23130d0>\n\n\n\n\nCode\nfolium.LayerControl(collapsed=False).add_to(new_counties_map)\n\n\n<folium.map.LayerControl at 0x7febdf471a50>\n\n\n\n\nCode\nnew_counties_map\n\n\n\nMake this Notebook Trusted to load map: File -> Trust Notebook\n\n\nSurprisingly, there are little differences between the two maps…so perhaps the SVI is good at capturing the needs of NHPI communities, even though it seems like they aggregate all minorities together! This is quite hopeful for the needs of smaller minority populations.\nHowever, let me double check this with a map of the differences in SVI scores.\n\n\nCode\ndifference_map = folium.Map(location=[37.5, -118], zoom_start=6,tiles='openstreetmap')\n\n\n\n\nCode\nfolium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'diff_RPL'],  \n            key_on='feature.properties.FIPS', \n            legend_name='CDC SVI Score - NHPI-Specific SVI Score',\n            fill_color='RdYlGn',\n            nan_fill_color=\"White\", \n            fill_opacity=0.7,\n            line_opacity=0.2,\n            highlight=True,\n            line_color='black').add_to(difference_map) \n\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    name='2020 CDC SVI Scores Across California Counties',\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'diff_RPL',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"Difference in Index Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(difference_map)  \n\n\n<folium.features.GeoJson at 0x7febdf4977c0>\n\n\n\n\nCode\ndifference_map\n\n\n\nMake this Notebook Trusted to load map: File -> Trust Notebook\n\n\nAgain, little differences exist. Most counties actually have a higher CDC SVI Score than my NHPI SVI Score. The county with the most negative difference is Humboldt County, even that is only 8.8% percent of a difference.\nBelow is a horizontal bar chart of how all counties rank on their CDC SVI Score, my NHPI SVI Score, and their differences:\n\n\nCode\ndiff_sorted = merged_counties_map.sort_values('RPL_THEMES')\ndiff_sorted.plot(kind = 'barh',\n                          x = 'COUNTY',\n                          y = 'RPL_THEMES',\n                          figsize = (8,9),\n                          title = 'CDC SVI Scores by CA County',\n                         xlabel = 'SVI Score',\n                         ylabel = 'County',\n                         legend=None)\n\n\n<AxesSubplot: title={'center': 'CDC SVI Scores by CA County'}, xlabel='SVI Score', ylabel='County'>\n\n\n\n\n\n\n\nCode\ndiff_sorted = merged_counties_map.sort_values('new_RPL_THEMES')\ndiff_sorted.plot(kind = 'barh',\n                          x = 'COUNTY',\n                          y = 'new_RPL_THEMES',\n                          figsize = (8,9),\n                          title = 'Adjusted SVI Score',\n                         xlabel = 'SVI Score',\n                         ylabel = 'County',\n                         legend=None)\n\n\n<AxesSubplot: title={'center': 'Adjusted SVI Score'}, xlabel='SVI Score', ylabel='County'>\n\n\n\n\n\n\n\nCode\ndiff_sorted = merged_counties_map.sort_values('diff_RPL')\ndiff_sorted.plot(kind = 'barh',\n                          x = 'COUNTY',\n                          y = 'diff_RPL',\n                          figsize = (8,9),\n                          title = 'CDC SVI Score - Adjusted SVI Score',\n                         xlabel = 'Difference Value',\n                         ylabel = 'County',\n                         color=(diff_sorted['diff_RPL'] > 0).map({True: '#77DD77',\n                                                    False: '#FF6961'}),\n                         legend=None)\n\n\n<AxesSubplot: title={'center': 'CDC SVI Score - Adjusted SVI Score'}, xlabel='Difference Value', ylabel='County'>\n\n\n\n\n\nSlight differences in ranking, even though rankings are mostly the same. Nevertheless, small differences are important in the grand scheme of things!\n\n\nIn a last ditch effort, I’ll be seeing how the same methods play out in Los Angeles County Census Tracts. Los Angeles County has the highest population of NHPIs of all counties in California.\n\n\nCode\nla_map = gpd.read_file('acs2021_5yr_la.json')\n\n\n\n\nCode\nla_map.head()\n\n\n\n\n\n\n  \n    \n      \n      geoid\n      name\n      B02012001\n      B02012001, Error\n      geometry\n    \n  \n  \n    \n      0\n      05000US06037\n      Los Angeles County, CA\n      57491\n      2057\n      MULTIPOLYGON (((-118.70339 34.16859, -118.7286...\n    \n    \n      1\n      14000US06037101110\n      Census Tract 1011.10, Los Angeles, CA\n      0\n      13\n      POLYGON ((-118.30229 34.25870, -118.29945 34.2...\n    \n    \n      2\n      14000US06037101122\n      Census Tract 1011.22, Los Angeles, CA\n      24\n      39\n      POLYGON ((-118.29697 34.27881, -118.29970 34.2...\n    \n    \n      3\n      14000US06037101220\n      Census Tract 1012.20, Los Angeles, CA\n      15\n      23\n      POLYGON ((-118.28592 34.25590, -118.28592 34.2...\n    \n    \n      4\n      14000US06037101221\n      Census Tract 1012.21, Los Angeles, CA\n      0\n      13\n      POLYGON ((-118.29945 34.25598, -118.29470 34.2...\n    \n  \n\n\n\n\n\n\nCode\nla_map = la_map.rename(columns={\"geoid\": \"FIPS\"})\nla_map['FIPS'] = la_map['FIPS'].str[-10:]\nla_map.at[0, 'FIPS']  = '06037'\nla_map['FIPS']=la_map['FIPS'].astype(int)\n\n\n\n\nCode\nsvi_tracts = svi_tracts[svi_tracts['COUNTY'] == 'Los Angeles']\n\n\n\n\nCode\nsvi_tracts.head()\n\n\n\n\n\n\n  \n    \n      \n      FIPS\n      COUNTY\n      E_MINRTY\n      M_MINRTY\n      EP_MINRTY\n      EPL_MINRTY\n      F_MINRTY\n      F_THEME3\n      SPL_THEME1\n      RPL_THEME1\n      SPL_THEME2\n      RPL_THEME2\n      SPL_THEME3\n      RPL_THEME3\n      SPL_THEME4\n      RPL_THEME4\n      SPL_THEMES\n      RPL_THEMES\n    \n  \n  \n    \n      1378\n      6037101110\n      Los Angeles\n      1530\n      412\n      39.0\n      0.2412\n      0\n      0\n      2.8863\n      0.6096\n      2.6980\n      0.6012\n      0.2412\n      0.2412\n      3.2165\n      0.8611\n      9.0420\n      0.6763\n    \n    \n      1379\n      6037101122\n      Los Angeles\n      960\n      305\n      23.3\n      0.0786\n      0\n      0\n      2.2235\n      0.4329\n      2.4367\n      0.4520\n      0.0786\n      0.0786\n      0.8038\n      0.0632\n      5.5426\n      0.2173\n    \n    \n      1380\n      6037101220\n      Los Angeles\n      2116\n      497\n      56.1\n      0.4242\n      0\n      0\n      3.8224\n      0.8418\n      3.2269\n      0.8634\n      0.4242\n      0.4242\n      2.0551\n      0.4126\n      9.5286\n      0.7331\n    \n    \n      1381\n      6037101221\n      Los Angeles\n      1761\n      457\n      46.5\n      0.3186\n      0\n      0\n      3.8725\n      0.8552\n      3.1821\n      0.8435\n      0.3186\n      0.3186\n      3.3890\n      0.9057\n      10.7622\n      0.8789\n    \n    \n      1382\n      6037101222\n      Los Angeles\n      1251\n      411\n      46.0\n      0.3130\n      0\n      0\n      4.3768\n      0.9579\n      3.5283\n      0.9509\n      0.3130\n      0.3130\n      3.1979\n      0.8568\n      11.4160\n      0.9398\n    \n  \n\n\n\n\n\n\nCode\nmerged_la_tracts = pd.merge(la_map, svi_tracts, on='FIPS')\n\n\n\n\nCode\nmerged_la_tracts['Percent_NHPI'] = merged_la_tracts['B02012001']/333632*100\ntemp_df = merged_la_tracts['Percent_NHPI'].apply(pd.to_numeric, errors='coerce').dropna().to_frame()\nmerged_la_tracts['new_SPL_THEME3'] = temp_df.apply(lambda x: (sum(x['Percent_NHPI'] > temp_df['Percent_NHPI']) / (temp_df.count() - 1)).round(3), axis=1)\n\n\nKeep repeating the same procedure of finding overall SVI score as earlier.\n\n\nCode\nmerged_la_tracts['new_SPL_THEMES'] = merged_la_tracts['SPL_THEME1'] + merged_la_tracts['SPL_THEME2'] + merged_la_tracts['SPL_THEME4'] + merged_la_tracts['new_SPL_THEME3']\ntemp_df = merged_la_tracts['new_SPL_THEMES'].apply(pd.to_numeric, errors='coerce').dropna().to_frame()\nmerged_la_tracts['new_RPL_THEMES'] = temp_df.apply(lambda x: (sum(x['new_SPL_THEMES'] > temp_df['new_SPL_THEMES']) / (temp_df.count() - 1)).round(3), axis=1)\n\n\n\n\nCode\nmerged_la_tracts = merged_la_tracts[['FIPS', 'geometry', 'name', 'new_SPL_THEME3', 'RPL_THEME3', 'SPL_THEMES', 'RPL_THEMES', 'new_SPL_THEMES', 'new_RPL_THEMES']]\n\nmerged_la_tracts['diff_SPL'] = merged_la_tracts['SPL_THEMES'] - merged_la_tracts['new_SPL_THEMES']\nmerged_la_tracts['diff_RPL'] = merged_la_tracts['RPL_THEMES'] - merged_la_tracts['new_RPL_THEMES']\n\n\nNow I’ll create a Census tract map for Los Angeles County comparing the CDC SVI score and my new index score.\n\n\nCode\nla_map = folium.Map(location=[34, -118], zoom_start=8,tiles=None, overlay=False)\n\nfg1 = folium.FeatureGroup(name='CDC SVI Score', overlay=False).add_to(la_map)\nfg2 = folium.FeatureGroup(name='NHPI-Specific SVI Score',overlay=False).add_to(la_map)\n\n# set color scale\ncustom_scale = (merged_la_tracts['RPL_THEMES'].quantile((0,0.2,0.4,0.6,0.8,1))).tolist()\n\n# add to first layer overall SVI score\nsvi_score = folium.Choropleth(\n            geo_data=merged_la_tracts,\n            data=merged_la_tracts,\n            columns=['FIPS', 'RPL_THEMES'],  # Get tract FIPS and plot the SVI index score (RPL_THEMES) for each county\n            key_on='feature.properties.FIPS', # Get geo boundaries from FIPS column index\n            threshold_scale=custom_scale, # Custom scale for legend\n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", # Use white if there is no data available for the county\n            fill_opacity=0.7,\n            line_opacity=0.2,\n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg1) \n\n# add tooltip\nfolium.features.GeoJson(\n                    data=merged_la_tracts,\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['name',\n                                'RPL_THEMES',\n                               ],\n                        aliases=[\"Census Tract:\",\n                                 \"Overall SVI Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(svi_score)  \n\n# add new NHPI SVI score layer on\nnew_svi = folium.Choropleth(\n            geo_data=merged_la_tracts,\n            data=merged_la_tracts,\n            columns=['FIPS', 'new_RPL_THEMES'],  \n            key_on='feature.properties.FIPS', \n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", \n            fill_opacity=0.7,\n            line_opacity=0.2,\n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg2) \n\nfolium.features.GeoJson(\n                    data=merged_la_tracts,\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['name',\n                                'new_RPL_THEMES',\n                               ],\n                        aliases=[\"Census Tract:\",\n                                 \"NHPI-Specific SVI Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(new_svi)  \n\n# Add legend to map\nfolium.Choropleth(\n    geo_data=merged_la_tracts,\n    data=merged_la_tracts,\n    columns=['FIPS', 'RPL_THEMES'],  \n    key_on='feature.properties.FIPS', \n    threshold_scale=custom_scale,\n    fill_color='YlOrRd',\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    legend_name='SVI Index Score', \n    overlay=False,\n    control=False,\n    line_color='black').add_to(la_map)\n\n# Toggle for aesthetic purposes\nfolium.TileLayer('cartodbpositron',overlay=True,name=\"View in Light Mode\").add_to(la_map)\n\n# Layer Control\nfolium.LayerControl(collapsed=False).add_to(la_map)\n\n\n<folium.map.LayerControl at 0x7febdc4373d0>\n\n\n\n\nCode\nla_map\n\n\n\nMake this Notebook Trusted to load map: File -> Trust Notebook\n\n\nAlready compared to my counties map, my map of Census Tracts in Los Angeles County shows a marked difference between the CDC SVI Score and my new NHPI-specific SVI score. Notable Census tracts have darker NHPI-specific SVI score colors, indicating that they are generally greater than the CDC’s SVI and suggesting a greater vulnerability for these neighborhoods based on NHPI population.\nLet’s take a look at a difference map to confirm this.\n\n\nCode\ndiff_la_map = folium.Map(location=[34, -118], zoom_start=8, tiles='openstreetmap')\n\n\n\n\nCode\nfolium.Choropleth(\n            geo_data=merged_la_tracts,\n            data=merged_la_tracts,\n            columns=['FIPS', 'diff_RPL'],  \n            key_on='feature.properties.FIPS', \n            legend_name='CDC SVI Score - NHPI-Specific SVI Score',\n            fill_color='RdYlGn',\n            nan_fill_color=\"White\", \n            fill_opacity=0.7,\n            line_opacity=0.2,\n            highlight=True,\n            line_color='black').add_to(diff_la_map) \n\nfolium.features.GeoJson(\n                    data=merged_la_tracts,\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['name',\n                                'diff_RPL',\n                               ],\n                        aliases=[\"Census Tract:\",\n                                 \"Difference in Index Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(diff_la_map)  \n\n\n<folium.features.GeoJson at 0x7febcbcce4d0>\n\n\n\n\nCode\ndiff_la_map\n\n\n\nMake this Notebook Trusted to load map: File -> Trust Notebook\n\n\nThe differences map shows more of a variation between positive and negative differences. Nevertheless, the fact that there is a larger variation does suggest that it would be useful to have an NHPI-specific index score, and similarly\n\n\n\n\nIn general, my analysis suggests that the CDC’s SVI is relatively accurate in capturing areas where NHPIs reside, especially on the county level, but that small differences still exist when zooming into the Census tract level. Ultimately, taking the percent of NHPIs in a given geographical area (i.e. county, Census tract) out of their total population (i.e. statewide, county-wide) may not be the best metric to measure race and ethnicity-related populations, as I failed to record major differences. Nevertheless, it would still be useful to disaggregate race and ethnicity-related variables and create race and ethnicity-specific indexes as to most accurately capture communities of need, especially for community groups applying for funding.\nThe results should be taken with a grain of salt, as there were several limitations in my analysis: - Only 2021 ACS 5-Year data tables were available - Since I used the Census Reporter to download geoJSON data, I could only use 2021 ACS 5-Year data tables, while the CDC used 2020 ACS 5-year data tables. Since population numbers can change drastically within a year, this could have caused calcualting differences. - Also due to using the Census Reporter, I could not access the exact table (DP05) that the CDC used in counting the minority population. Instead, I used a different ACS table with a different variable counting the NHPI population (B02012001). As a result, I didn’t have the perfect comparison. - I was geographically limited in terms of only mapping out California counties and Census tracts in Los Angeles County. A more comprehensive analysis would map out all counties and Census tracts in the United States.\nI hope to address these limitations in the future, past this final project.\n\n\n\n\nA complete Census tract map for California (and eventually, the United States) - unfortunately, I didn’t think I had the memory capacity to do so\nAddressing the other limitations in my analysis - i.e. using ACS 5-Year 2020 data and the same data tables the SVI index used\nEvaluating the other indicators in the CDC’s SVI score\n\nAnswering the following question: What makes a good indicator?\n\nMore research - i.e. How do other indexes (i.e. California’s Healthy Places Index) quantify vulnerability?"
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Post With Code",
    "section": "",
    "text": "This is a post with executable code."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "finalblog",
    "section": "",
    "text": "Post With Code\n\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\n\n\nMar 20, 2023\n\n\nHarlow Malloc\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDH 140 Final Project Blog Page\n\n\n\n\n\nDH 140 Final Project Blog Page\n\n\n\n\n\n\nMar 18, 2023\n\n\nJessica Li\n\n\n\n\n\n\n  \n\n\n\n\nWelcome To My Blog\n\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\n\n\nMar 17, 2023\n\n\nTristan O’Malley\n\n\n\n\n\n\nNo matching items"
  }
]